(function(t){function e(e){for(var a,o,s=e[0],l=e[1],u=e[2],c=0,d=[];c<s.length;c++)o=s[c],r[o]&&d.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);p&&p(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},i=[];function o(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"5c489012"}[t]+".js"}function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise(function(e,a){n=r[t]=[e,a]});e.push(n[2]=a);var i,l=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=o(t),i=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+a+": "+i+")");o.type=a,o.request=i,n[1](o)}r[t]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:u})},12e4);u.onerror=u.onload=i,l.appendChild(u)}return Promise.all(e)},s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var p=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("64a9"),r=n.n(a);r.a},"549c":function(t,e,n){"use strict";var a=n("8589"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"upload"},[n("div",{staticClass:"upload-files"},[n("header",[n("p",[n("i",{staticClass:"fas fa-cloud-upload-alt",attrs:{"aria-hidden":"true"}}),n("span",{staticClass:"up"},[t._v("up")]),n("span",{staticClass:"load"},[t._v("load")]),n("br"),null!==t.user?n("span",{staticClass:"load",staticStyle:{"font-size":"20px"}},[t._v("Xin chào ")]):t._e(),null!==t.user?n("span",{staticClass:"up",staticStyle:{"font-size":"20px"}},[t._v(t._s(t.user.full_name))]):t._e()]),null!==t.user?n("a",{staticStyle:{position:"absolute",top:"5px",right:"5px","text-decoration":"none"},attrs:{href:"#"},on:{click:t.logOut}},[t._v("Đăng xuất")]):t._e()]),null!==t.user?n("div",{class:{body:!0,hidden:null!==t.file},attrs:{id:"drop"}},[n("i",{staticClass:"far fa-file-alt pointer-none",attrs:{"aria-hidden":"true"}}),n("p",{staticClass:"pointer-none"},[n("b",[t._v("Kéo và thả")]),t._v(" file vào đây "),n("br"),t._v("hoặc\n          "),n("a",{attrs:{href:"#"},on:{click:t.trigerFile}},[t._v("chọn file")]),t._v(" để bắt đầu upload (max\n          size: 20mb)\n        ")]),n("input",{staticStyle:{"max-width":"200px"},attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return e.preventDefault(),t.handleFileSelect(e)}}})]):n("div",{staticClass:"body",attrs:{id:"drop"}},[n("form",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.modalUser,expression:"modalUser"}],staticStyle:{"max-width":"250px",margin:"auto","margin-bottom":"10px",visibility:"visible"},attrs:{type:"password",placeholder:"Nhập vào mật khẩu..."},domProps:{value:t.modalUser},on:{input:function(e){e.target.composing||(t.modalUser=e.target.value)}}}),n("button",{staticClass:"buttonShadow",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("\n            Xong\n          ")]),n("PulseLoader",{staticStyle:{"margin-top":"20px"},attrs:{loading:t.loadingLogin}})],1)]),null!==t.user&&null===t.file?n("div",{staticClass:"tailieu-upload"},t._l(t.getList,function(e,a){return n("div",{key:a,staticClass:"row"},[n("div",{staticClass:"cell -file"},[n("i",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),n("div",{staticClass:"inner"},[n("a",{staticClass:"filename",attrs:{href:"#"}},[t._v(t._s(e.name||"N/A"))]),n("small",{staticClass:"details"},[n("span",{staticClass:"detail -filesize"},[n("i",{staticClass:"fas fa-hdd",attrs:{"aria-hidden":"true"}}),t._v("\n                  "+t._s(e.meta.size/1e3)+"kb\n                ")])])]),n("a",{staticStyle:{"margin-left":"auto","margin-top":"auto","margin-bottom":"auto",color:"#20a8d8"},on:{click:function(n){t.downloadFile(e)}}},[n("i",{staticClass:"fas fa-arrow-alt-circle-down fa-lg downloadbtn"})]),n("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"https://asia-northeast1-thuongupload.cloudfunctions.net/api/download/"+e[".key"],expression:"'https://asia-northeast1-thuongupload.cloudfunctions.net/api/download/'+file['.key']",arg:"copy"}],staticStyle:{"margin-left":"10px","margin-top":"auto","margin-bottom":"auto",color:"#4caf50"},on:{click:t.onCopy}},[n("i",{staticClass:"far fa-copy fa-lg"})]),n("a",{staticStyle:{"margin-top":"auto","margin-bottom":"auto","margin-left":"10px",color:"#ffa000"},on:{click:function(n){t.onDelete(e[".key"])}}},[n("i",{staticClass:"fas fa-trash-alt fa-lg deleteDoc"})])])])})):t._e(),n("footer",{class:{hasFiles:null!==t.file}},[t._m(0),null!==t.file?n("div",{staticClass:"list-files"},[n("div",{staticClass:"file file--0"},[n("div",{staticClass:"name"},[n("span",[t._v(t._s(t.file.name))])]),n("div",{class:{progress:!0,active:!t.uploading}}),n("div",{class:{done:!0,anim:t.uploading}},[n("a",{attrs:{href:"#"}},[n("svgico")],1)])])]):t._e(),null!==t.file&&t.uploading?n("div",{staticStyle:{"margin-top":"30px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.titelDoc,expression:"titelDoc"}],staticStyle:{"max-width":"250px",margin:"auto","margin-bottom":"10px"},attrs:{type:"text",placeholder:"Nhập vào mô tả ngắn cho file..."},domProps:{value:t.titelDoc},on:{input:function(e){e.target.composing||(t.titelDoc=e.target.value)}}}),n("button",{class:{importar:!0,active:null!==t.file},on:{click:t.handleSubmitFile}},[t._v("\n            Xong\n          ")])]):t._e()])])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"divider"},[n("span",[n("h3",[t._v("FILES")])])])}],o=(n("ac6a"),n("5df3"),n("3835")),s=(n("7f7f"),n("be94")),l=(n("6b54"),n("96cf"),n("1da1")),u=(n("55dd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 1000 1000"}},[n("g",[n("path",{attrs:{id:"path",d:"M500,10C229.4,10,10,229.4,10,500c0,270.6,219.4,490,490,490c270.6,0,490-219.4,490-490C990,229.4,770.6,10,500,10z M500,967.7C241.7,967.7,32.3,758.3,32.3,500C32.3,241.7,241.7,32.3,500,32.3c258.3,0,467.7,209.4,467.7,467.7C967.7,758.3,758.3,967.7,500,967.7z M748.4,325L448,623.1L301.6,477.9c-4.4-4.3-11.4-4.3-15.8,0c-4.4,4.3-4.4,11.3,0,15.6l151.2,150c0.5,1.3,1.4,2.6,2.5,3.7c4.4,4.3,11.4,4.3,15.8,0l308.9-306.5c4.4-4.3,4.4-11.3,0-15.6C759.8,320.7,752.7,320.7,748.4,325z"}})])])}),c=[],p=n("2877"),d={},f=Object(p["a"])(d,u,c,!1,null,null,null);f.options.__file="svgico.vue";var h=f.exports,v=n("8a5d"),g=n("8aa5"),m=n.n(g),b={components:{PulseLoader:v["a"],svgico:h},data:function(){return{file:null,uploading:!1,fileUploaded:[],selectMH:null,titelDoc:"",passfile:"",resultUpload:null,tailieu:null,uid:null,user:null,modalUser:"",loadingLogin:!1,binding:!1}},computed:{getDB:function(){return this.$store.state.db},getList:function(){var t=this.fileUploaded;return t.sort(function(t,e){return e.timestamp-t.timestamp})}},created:function(){this.user=JSON.parse(localStorage.getItem("user"))},methods:{onCopy:function(){this.$root.showSuccess("Đã copy link download to clipboard")},onDelete:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.state.db.ref("files/"+e).once("value");case 3:return n=t.sent,a=n.val(),t.next=7,this.$store.state.firebase.storage().ref(a.meta.fullPath).delete();case 7:return t.next=9,this.$store.state.db.ref("files/"+e).remove();case 9:this.$root.showSuccess("Đã xóa file"),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](0);case 14:case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(e){return t.apply(this,arguments)}}(),bindingData:function(t){!this.binding&&t&&(this.$bindAsArray("fileUploaded",t.ref("files/")),this.binding=!0)},logOut:function(){this.user=null,this.modalUser=null,localStorage.setItem("user",null),window.location.href="/"},handleLogin:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loadingLogin=!0,t.next=4,this.axios.get("https://asia-northeast1-thuongupload.cloudfunctions.net/api/login/"+this.modalUser);case 4:if(e=t.sent,n=e.data,!n.error){t.next=11;break}return this.loadingLogin=!1,t.abrupt("return",this.$root.showError(n.error));case 11:return t.next=13,m.a.auth().signInWithCustomToken(n.token);case 13:this.loadingLogin=!1,this.user=n,localStorage.setItem("user",JSON.stringify(n));case 16:t.next=23;break;case 18:return t.prev=18,t.t0=t["catch"](0),console.log(t.t0),this.loadingLogin=!1,t.abrupt("return",this.$root.showError(t.t0));case 23:case"end":return t.stop()}},t,this,[[0,18]])}));return function(){return t.apply(this,arguments)}}(),downloadFile:function(t){if(t.password){var e=prompt("Nhập vào mật khẩu để tải file","");if(e!=t.password)return this.$root.showError("Mật khẩu không đúng")}var n=t.url,a=document.createElement("a");a.href=n,a.target="_blank",a.click()},invisiableDoc:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,n){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=this.$store.state.db,t.next=4,a.ref("tailieu/"+n+"/"+e).update({visible:!1});case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",this.$root.showError(t.t0.toString()));case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(e,n){return t.apply(this,arguments)}}(),handleSubmitFile:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.titelDoc){t.next=3;break}throw new Error("Bạn phải nhập tiêu đề cho tài liệu.");case 3:return e=this.$store.state.firebase,n=this.$store.state.db,a=Object(s["a"])({},this.resultUpload,{timestamp:e.database.ServerValue.TIMESTAMP,visible:!0,name:this.titelDoc}),this.passfile&&(a["password"]=this.passfile),t.next=10,n.ref("files").push(a);case 10:return this.$root.showSuccess("Tài liệu của bạn được upload thành công."),this.file=null,this.uploading=!1,this.titelDoc="",this.resultUpload=null,t.abrupt("return");case 18:return t.prev=18,t.t0=t["catch"](0),t.abrupt("return",this.$root.showError(t.t0.toString()));case 21:case"end":return t.stop()}},t,this,[[0,18]])}));return function(){return t.apply(this,arguments)}}(),trigerFile:function(){document.querySelector("input[type=file]").click()},handleFileSelect:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.file=e.target.files[0],t.prev=1,t.next=4,this.uploadFile("/files/".concat(Math.random().toString(36).substring(7),"/")+this.file.name,this.file);case 4:this.resultUpload=t.sent,this.titelDoc=this.file.name,this.uploading=!0,document.querySelector("input[type=file]").value="",t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](1),this.$root.showError("Upload thất bại. Lưu ý max size upload là 20mb"),this.file=null,document.querySelector("input[type=file]").value="";case 15:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e){return t.apply(this,arguments)}}(),uploadFile:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.$store.state.firebase.storage().ref(e).put(n).then(function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var n,a,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.ref.getDownloadURL(),e.ref.getMetadata()]);case 2:return n=t.sent,a=Object(o["a"])(n,2),r=a[0],i=a[1],t.abrupt("return",{url:r,meta:{size:i.size,name:i.name,updated:i.updated,fullPath:i.fullPath,bucket:i.bucket}});case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},mounted:function(){var t=document.querySelector.bind(document),e={};e.init=function(){t("#drop").ondragleave=function(e){t("#drop").classList.remove("active"),e.preventDefault()},t("#drop").ondragover=t("#drop").ondragenter=function(e){t("#drop").classList.add("active"),e.preventDefault()},t("#drop").ondrop=function(e){t("input[type=file]").files=e.dataTransfer.files,t("footer").classList.add("hasFiles"),t("#drop").classList.remove("active"),e.preventDefault()}}()},watch:{getDB:function(t){t&&this.user&&this.bindingData(t)},user:function(t){t&&this.getDB&&this.bindingData(this.getDB)}}},w=b,_=(n("034f"),n("5c64"),Object(p["a"])(w,r,i,!1,null,null,null));_.options.__file="App.vue";var y=_.exports,x=n("8c4f"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),a("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},C=[],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._m(0),n("h3",[t._v("Installed CLI Plugins")]),t._m(1),n("h3",[t._v("Essential Links")]),t._m(2),n("h3",[t._v("Ecosystem")]),t._m(3)])},j=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n    For a guide and recipes on how to configure / customize this project,"),n("br"),t._v("\n    check out the\n    "),n("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(".\n  ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[t._v("eslint")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),n("li",[n("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),n("li",[n("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),n("li",[n("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],D={name:"HelloWorld",props:{msg:String}},O=D,$=(n("549c"),Object(p["a"])(O,S,j,!1,null,"72045312",null));$.options.__file="HelloWorld.vue";var E=$.exports,L={name:"home",components:{HelloWorld:E}},P=L,M=Object(p["a"])(P,k,C,!1,null,null,null);M.options.__file="Home.vue";var U=M.exports;a["a"].use(x["a"]);var R=new x["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:U},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),T=n("2f62");a["a"].use(T["a"]);var F=new T["a"].Store({state:{db:null,firebase:null},mutations:{setData:function(t,e){var n=e.db,a=e.firebase;t.db=n,t.firebase=a}},actions:{}}),z=n("ddf5"),I=n.n(z),B=n("bc3a"),N=n.n(B),A=n("a7fe"),q=n.n(A),H=n("5f30"),W=n.n(H),J=n("4eb5"),V=n.n(J);n("e1db");window.toastr=n("854a"),a["a"].use(I.a),a["a"].use(q.a,N.a),a["a"].use(W.a),V.a.config.autoSetContainer=!0,a["a"].use(V.a);var X={apiKey:"AIzaSyD-GkjsMg-tcslZqSQi8gq4vYDPr08HQ7s",authDomain:"thuongupload.firebaseapp.com",databaseURL:"https://thuongupload.firebaseio.com",projectId:"thuongupload",storageBucket:"thuongupload.appspot.com",messagingSenderId:"111368187517",appId:"1:111368187517:web:b5661f483380a8c4"};m.a.initializeApp(X),m.a.auth().onAuthStateChanged(function(t){if(t){var e=m.a.database();F.commit("setData",{db:e,firebase:m.a})}}),a["a"].config.productionTip=!1,new a["a"]({router:R,store:F,render:function(t){return t(y)},methods:{showError:function(t){return this.$toastr.error(t,"Somthing went wrong !",{closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"3000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"})},showSuccess:function(t){return this.$toastr.success(t,"operation success !",{closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"3000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"})}}}).$mount("#app")},"5c64":function(t,e,n){"use strict";var a=n("c2ae"),r=n.n(a);r.a},"64a9":function(t,e,n){},8589:function(t,e,n){},c2ae:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.a0270953.js.map